(this["webpackJsonpwiz-calc-2"]=this["webpackJsonpwiz-calc-2"]||[]).push([[0],{43:function(e,t,a){e.exports=a(55)},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),l=a.n(c),i=a(37),o=a(6),u=a(62),s=a(61),p=a(12),m=a(58),d=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(m.a,Object.assign({spacing:"5px",boxShadow:"md",border:"solid 3px",borderRadius:"10px",borderColor:"gray.300"},a),t)},b=a(59),f=a(60),h=a(32),g=a(15),v=a(5),E=a(64),x=function(e){var t=parseFloat(e);return t||0},O=function(e,t,a){var n=e.enchantment?e.enchantment:0,r=e.increment?e.increment.base*e.increment.pips:0;return e.damages[a]=j(t,e.bases[a]+n+r),e},j=function(e,t){for(var a=e.percentModifier,n=e.flatDamage,r=e.buffs,c=Math.floor((1+Number(a)/100)*Number(t)+Number(n)),l=0;l<r.length;l++)c*=1+r[l]/100,c=Math.floor(c);return c},y=function(e,t){switch(t.type){case"change_percent":var a=Object(v.a)({},e);return a.percentModifier=x(t.value),a;case"change_flat":var n=Object(v.a)({},e);return n.flatDamage=x(t.value),n;case"change_buffs":var r=Object(v.a)({},e);return r.buffs=t.value.split("\n").map((function(e){var t=parseInt(e.split(" ")[0]);return t||0})),r.buffsRaw=t.value,r;case"load":return t.character;default:throw new Error("Error")}},w={percentModifier:0,flatDamage:0,pierce:0,buffs:[],buffsRaw:"",shields:[],sheldsRaw:""},_=Object(n.createContext)({character:w,dispatch:function(){return null}}),C=function(e){var t=e.children,a=Object(n.useReducer)(y,w),c=Object(g.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("character");if(e){var t=JSON.parse(e);i({type:"load",character:t})}}),[]),Object(n.useEffect)((function(){localStorage.setItem("character",JSON.stringify(l))}),[l]),r.a.createElement(_.Provider,{value:{character:l,dispatch:i}},t)},S=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(m.a,Object.assign({spacing:"10px",px:"10px",pb:"10px",pt:"5px"},a),t)},k=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(m.a,Object.assign({p:"10px",borderBottom:"solid 3px",borderColor:"gray.300",spacing:"10px"},a),t)},z=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(m.a,Object.assign({spacing:"5px",px:"10px",pb:"10px",mb:"5px",borderBottom:"solid 3px",borderColor:"gray.300"},a),t)},D=a(42),A=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(o.a,null,r.a.createElement(b.a,null,t),r.a.createElement(D.a,Object.assign({type:"number",onFocus:function(e){e.target.select()}},a)))},B=function(){var e=Object(n.useContext)(_),t=e.character,a=e.dispatch;return r.a.createElement(d,null,r.a.createElement(k,null,r.a.createElement(b.a,{textAlign:"center",fontSize:"20px"},"Character Stats")),r.a.createElement(z,null,r.a.createElement(A,{value:t.percentModifier,onChange:function(e){e.preventDefault(),a({type:"change_percent",value:e.target.value})}},"Percent Modifier"),r.a.createElement(A,{value:t.flatDamage,onChange:function(e){e.preventDefault(),a({type:"change_flat",value:e.target.value})}},"Flat Damage")),r.a.createElement(z,null,r.a.createElement(b.a,{fontSize:"20px",textAlign:"center"},"+ / - Charms")),r.a.createElement(S,null,r.a.createElement(f.a,{height:"212px",resize:"vertical",placeholder:"[percent] [name]",value:t.buffsRaw,onChange:function(e){a({type:"change_buffs",value:e.target.value})}}),r.a.createElement(h.a,{onClick:function(){return a({type:"change_buffs",value:""})},mx:"auto",w:"40%"},"Clear")))},I=a(30),M=a(17),R=function(e,t){switch(t.type){case"add_spell":return[].concat(Object(M.a)(e),[{id:Object(E.a)(),name:"Untitled",bases:[0],damages:[0]}]);case"delete_spell":for(var a=[],n=0;n<e.length;n++)t.index!==n&&a.push(e[n]);return a;case"update_spell":var r=Object(M.a)(e);return r[t.index]=t.spell,r;case"load":return t.spells;default:throw new Error("Error")}},W=Object(n.createContext)({spells:[],dispatch:function(){return null}}),N=function(e){var t=e.children,a=Object(n.useReducer)(R,[]),c=Object(g.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("spells");if(e){var t=JSON.parse(e);i({type:"load",spells:t})}}),[]),Object(n.useEffect)((function(){localStorage.setItem("spells",JSON.stringify(l))}),[l]),r.a.createElement(W.Provider,{value:{spells:l,dispatch:i}},t)},J=function(e,t){switch(t.type){case"change_name":return Object(v.a)(Object(v.a)({},e),{},{name:t.name});case"add_base":var a=Object(M.a)(e.bases),n=Object(M.a)(e.damages);return a.push(0),n.push(0),Object(v.a)(Object(v.a)({},e),{},{bases:a,damages:n});case"change_base":var r=Object(M.a)(e.bases);return r[t.index]=x(t.value),Object(v.a)(Object(v.a)({},e),{},{bases:r});case"delete_base":for(var c=[],l=[],i=0;i<e.bases.length;i++)t.index!==i&&(c.push(e.bases[i]),l.push(e.damages[i]));return Object(v.a)(Object(v.a)({},e),{},{bases:c,damages:l});case"calculate":var o=Object(v.a)({},e);return function(e,t){for(var a=0;a<e.bases.length;a++)O(e,t,a)}(o,t.character),o;case"toggle_enchantment":var u=Object(v.a)({},e);return void 0===u.enchantment?u.enchantment=0:u.enchantment=void 0,u;case"change_enchantment":var s=Object(v.a)({},e);return s.enchantment=x(t.value),s;case"toggle_increment":var p=Object(v.a)({},e);return void 0===p.increment?p.increment={base:0,pips:1}:p.increment=void 0,p;case"change_increment":if(void 0===e.increment)return e;var m=Object(v.a)({},e.increment);return void 0!==t.base&&(m.base=x(t.base)),void 0!==t.pips&&(m.pips=x(t.pips)),Object(v.a)(Object(v.a)({},e),{},{increment:m});case"delete_spell":return Object(v.a)(Object(v.a)({},e),{},{_delete:!0});default:throw new Error("Error")}},F=function(e){var t=Object.assign({},e);return r.a.createElement(s.a,Object.assign({},t,{fontSize:"24px",icon:I.a}))},P=function(e){var t=e.spell,a=e.index,c=function(e,t){var a=Object(n.useContext)(W).dispatch,c=Object(n.useContext)(_).character,l=r.a.useReducer(J,e),i=Object(g.a)(l,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){!0===o._delete?a({type:"delete_spell",index:t}):a({type:"update_spell",index:t,spell:o})}),[o,a,t]),Object(n.useEffect)((function(){u({type:"calculate",character:c})}),[c,o.bases,o.enchantment,o.increment]),u}(t,a),l=Object(n.useState)(!1),u=Object(g.a)(l,2),p=u[0],m=u[1];return r.a.createElement(d,null,r.a.createElement(k,{p:"5px"},r.a.createElement(i.a,null,r.a.createElement(i.a,null,r.a.createElement(s.a,{"aria-label":"edit",variant:"ghost",isActive:p,fontSize:"24px",title:"Click for edit mode or Shift+Click to delete spell",onClick:function(e){e.shiftKey?c({type:"delete_spell"}):m(!p)},mr:"5px",icon:I.b})),r.a.createElement(i.a,null,r.a.createElement(D.a,{textAlign:"center",fontSize:"20px",mr:"5px",border:"none",spellCheck:"false",value:t.name,onFocus:function(e){e.target.select()},onChange:function(e){e.preventDefault(),c({type:"change_name",name:e.target.value})}})),r.a.createElement(i.a,null,p&&r.a.createElement(F,{variantColor:"red","aria-label":"close",title:"Delete spell",onClick:function(){return c({type:"delete_spell"})}})))),p&&r.a.createElement(z,{mt:"5px",spacing:"8px",isInline:!0},r.a.createElement(h.a,{onClick:function(){return c({type:"add_base"})},isActive:void 0!==t.enchantment,title:"Add base to spell"},"B"),r.a.createElement(h.a,{onClick:function(){return c({type:"toggle_enchantment"})},isActive:void 0!==t.enchantment,title:"Toggle enchantment"},"E"),r.a.createElement(h.a,{onClick:function(){return c({type:"toggle_increment"})},isActive:void 0!==t.increment,title:"Toggle increment"},"I")),void 0!==t.enchantment?r.a.createElement(z,null,r.a.createElement(A,{onChange:function(e){c({type:"change_enchantment",value:e.target.value})},value:t.enchantment},"Enchantment")):null,void 0!==t.increment?r.a.createElement(z,null,r.a.createElement(i.a,null,r.a.createElement(o.a,{pr:"10px"},r.a.createElement(A,{onChange:function(e){c({type:"change_increment",pips:e.target.value})},value:t.increment.pips},"Pips")),r.a.createElement(A,{onChange:function(e){c({type:"change_increment",base:e.target.value})},value:t.increment.base},"Base"))):null,r.a.createElement(S,null,t.bases.map((function(e,a){return r.a.createElement(i.a,{key:a},p&&r.a.createElement(F,{variant:"ghost",mr:"10px","aria-label":"close",title:"Delete base",onClick:function(){return c({type:"delete_base",index:a})}}),r.a.createElement(i.a,{w:"50%"},r.a.createElement(A,{value:e,title:"Base damage",onChange:function(e){e.preventDefault(),c({type:"change_base",index:a,value:e.target.value})}})),r.a.createElement(i.a,{ml:"auto"},r.a.createElement(b.a,{flexWrap:"wrap",wordBreak:"break-word",my:"auto",ml:"auto",fontSize:"18px",fontWeight:"bold"},t.damages[a].toLocaleString("en",{useGrouping:!0}))))}))))},T=function(){var e=Object(n.useContext)(W),t=e.spells,a=e.dispatch,c=t.map((function(e,t){return r.a.createElement(i.a,{key:e.id,mb:"auto",pb:"20px",w:"206px",mr:"20px"},r.a.createElement(P,{spell:e,index:t}))}));return r.a.createElement(o.a,{minW:"430px",maxW:"900px",pl:"20px",mx:"auto"},r.a.createElement(d,{py:"10px",mr:"20px",my:"20px"},r.a.createElement(u.a,{color:"gray.900",textAlign:"center",size:"xl"},"Wiz Calculator 2")),r.a.createElement(o.a,null,r.a.createElement(o.a,{float:"left",minW:"181px",w:"181px",mr:"20px"},r.a.createElement(o.a,{mb:"20px"},r.a.createElement(B,null))),r.a.createElement(i.a,{wrap:"wrap"},c,r.a.createElement(i.a,{minH:"100px",pb:"20px",w:"216px",mr:"10px"},t.length<12?r.a.createElement(s.a,{variantColor:"blue",boxShadow:"md",m:"auto","aria-label":"Add Spellcard",icon:"add",onClick:function(){a({type:"add_spell"})}}):null))))},G=a(21),H=a(65);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(63),L=Object(v.a)({},K.a);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G.a,{theme:L},r.a.createElement(H.a,null),r.a.createElement(C,null,r.a.createElement(N,null,r.a.createElement(T,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.13e4e188.chunk.js.map