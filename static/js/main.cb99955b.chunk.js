(this["webpackJsonpwiz-calc-2"]=this["webpackJsonpwiz-calc-2"]||[]).push([[0],{48:function(e,t,a){e.exports=a(60)},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),l=a.n(c),u=a(38),o=a(5),i=a(65),s=a(66),p=a(14),m=a(63),f=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(m.a,Object.assign({spacing:"5px",boxShadow:"md",border:"solid 3px",borderRadius:"10px",borderColor:"gray.300"},a),t)},d=a(40),h=a(64),b=a(33),g=a(22),v=a(8),E=a(69),x=function(e){var t=parseInt(e);return t||0},O=function(e,t,a){var n=e.enchantment?e.enchantment:0,r=e.increment?e.increment.base*e.increment.pips:0;return e.damages[a]=j(t,e.bases[a]+n+r),e},j=function(e,t){for(var a=e.percentModifier,n=e.flatDamage,r=e.buffs,c=Math.floor((1+Number(a)/100)*Number(t)+Number(n)),l=0;l<r.length;l++)c*=1+r[l]/100,c=Math.floor(c);return c},w=function(e,t){switch(t.type){case"change_percent":var a=Object(v.a)({},e);return a.percentModifier=x(t.value),a;case"change_flat":var n=Object(v.a)({},e);return n.flatDamage=x(t.value),n;case"change_buffs":var r=Object(v.a)({},e);return r.buffs=t.value.split("\n").map((function(e){var t=parseInt(e.split(" ")[0]);return t||0})),r.buffsRaw=t.value,r;case"load":return t.character;default:throw new Error("Error")}},y={percentModifier:0,flatDamage:0,pierce:0,buffs:[],buffsRaw:"",shields:[],sheldsRaw:""},C=Object(n.createContext)({character:y,dispatch:function(){return null}}),_=function(e){var t=e.children,a=Object(n.useReducer)(w,y),c=Object(g.a)(a,2),l=c[0],u=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("character");if(e){var t=JSON.parse(e);u({type:"load",character:t})}}),[]),Object(n.useEffect)((function(){localStorage.setItem("character",JSON.stringify(l))}),[l]),r.a.createElement(C.Provider,{value:{character:l,dispatch:u}},t)},S=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(m.a,Object.assign({spacing:"10px",px:"10px",pb:"10px",pt:"5px"},a),t)},k=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(m.a,Object.assign({p:"10px",borderBottom:"solid 3px",borderColor:"gray.300",spacing:"10px"},a),t)},z=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(m.a,Object.assign({spacing:"5px",px:"10px",pb:"10px",mb:"5px",borderBottom:"solid 3px",borderColor:"gray.300"},a),t)},D=a(46),I=function(e){var t=e.children,a=Object(p.a)(e,["children"]);return r.a.createElement(o.a,null,r.a.createElement(d.a,null,t),r.a.createElement(D.a,a))},M=function(){var e=Object(n.useContext)(C),t=e.character,a=e.dispatch;return r.a.createElement(f,null,r.a.createElement(k,null,r.a.createElement(d.a,{textAlign:"center",fontSize:"20px"},"Character Stats")),r.a.createElement(z,null,r.a.createElement(I,{value:t.percentModifier,onChange:function(e){e.preventDefault(),a({type:"change_percent",value:e.target.value})}},"Percent Modifier"),r.a.createElement(I,{value:t.flatDamage,onChange:function(e){e.preventDefault(),a({type:"change_flat",value:e.target.value})}},"Flat Damage")),r.a.createElement(z,null,r.a.createElement(d.a,{fontSize:"20px",textAlign:"center"},"+ / - Charms")),r.a.createElement(S,null,r.a.createElement(h.a,{height:"212px",resize:"vertical",placeholder:"[percent] [name]",value:t.buffsRaw,onChange:function(e){a({type:"change_buffs",value:e.target.value})}}),r.a.createElement(b.a,{onClick:function(){return a({type:"change_buffs",value:""})},mx:"auto",w:"40%"},"Clear")))},R=a(25),B=function(e,t){switch(t.type){case"add_spell":return[].concat(Object(R.a)(e),[{id:Object(E.a)(),name:"Untitled",bases:[0],damages:[0]}]);case"delete_spell":for(var a=[],n=0;n<e.length;n++)t.index!==n&&a.push(e[n]);return a;case"update_spell":var r=Object(R.a)(e);return r[t.index]=t.spell,r;case"load":return t.spells;default:throw new Error("Error")}},N=Object(n.createContext)({spells:[],dispatch:function(){return null}}),W=function(e){var t=e.children,a=Object(n.useReducer)(B,[]),c=Object(g.a)(a,2),l=c[0],u=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("spells");if(e){var t=JSON.parse(e);u({type:"load",spells:t})}}),[]),Object(n.useEffect)((function(){localStorage.setItem("spells",JSON.stringify(l))}),[l]),r.a.createElement(N.Provider,{value:{spells:l,dispatch:u}},t)},A=function(e,t){switch(t.type){case"change_name":return Object(v.a)(Object(v.a)({},e),{},{name:t.name});case"add_base":var a=Object(v.a)({},e);return a.bases.push(0),a.damages.push(0),a;case"change_base":var n=Object(R.a)(e.bases);return n[t.index]=x(t.value),Object(v.a)(Object(v.a)({},e),{},{bases:n});case"calculate":var r=Object(v.a)({},e);return function(e,t){for(var a=0;a<e.bases.length;a++)O(e,t,a)}(r,t.character),r;case"toggle_enchantment":var c=Object(v.a)({},e);return void 0===c.enchantment?c.enchantment=0:c.enchantment=void 0,c;case"change_enchantment":var l=Object(v.a)({},e);return l.enchantment=x(t.value),l;case"toggle_increment":var u=Object(v.a)({},e);return void 0===u.increment?u.increment={base:0,pips:1}:u.increment=void 0,u;case"change_increment":if(void 0===e.increment)return e;var o=Object(v.a)({},e.increment);return void 0!==t.base&&(o.base=x(t.base)),void 0!==t.pips&&(o.pips=x(t.pips)),Object(v.a)(Object(v.a)({},e),{},{increment:o});case"delete_spell":return e;default:throw new Error("Error")}},J=a(67),P=a(45),F=function(e){var t=e.dispatch;return r.a.createElement(J.d,null,r.a.createElement(J.a,null,r.a.createElement(P.a,{"aria-label":"spell-options",size:"24px"})),r.a.createElement(J.c,null,r.a.createElement(J.b,{onClick:function(){return t({type:"add_base"})}},"Add Base"),r.a.createElement(J.b,{onClick:function(){return t({type:"toggle_enchantment"})}},"Toggle Enchantment"),r.a.createElement(J.b,{onClick:function(){return t({type:"toggle_increment"})}},"Toggle Increment"),r.a.createElement(J.b,{onClick:function(){return t({type:"delete_spell"})}},"Delete")))},T=function(e){var t=e.spell,a=e.index,c=function(e,t){var a=Object(n.useContext)(N).dispatch,c=Object(n.useContext)(C).character,l=r.a.useReducer(A,e),u=Object(g.a)(l,2),o=u[0],i=u[1];return Object(n.useEffect)((function(){a({type:"update_spell",index:t,spell:o})}),[o,a,t]),Object(n.useEffect)((function(){i({type:"calculate",character:c})}),[c,o.bases,o.enchantment,o.increment]),i}(t,a);return r.a.createElement(f,null,r.a.createElement(k,{p:"5px"},r.a.createElement(u.a,null,r.a.createElement(u.a,null,r.a.createElement(D.a,{textAlign:"center",fontSize:"20px",mr:"5px",border:"none",spellCheck:"false",value:t.name,onFocus:function(e){e.target.select()},onChange:function(e){e.preventDefault(),c({type:"change_name",name:e.target.value})}})),r.a.createElement(u.a,null,r.a.createElement(F,{dispatch:c})))),void 0!==t.enchantment?r.a.createElement(z,null,r.a.createElement(I,{onChange:function(e){c({type:"change_enchantment",value:e.target.value})},value:t.enchantment},"Enchantment")):null,void 0!==t.increment?r.a.createElement(z,null,r.a.createElement(u.a,null,r.a.createElement(o.a,{pr:"10px"},r.a.createElement(I,{onChange:function(e){c({type:"change_increment",pips:e.target.value})},value:t.increment.pips},"Pips")),r.a.createElement(I,{onChange:function(e){c({type:"change_increment",base:e.target.value})},value:t.increment.base},"Base"))):null,r.a.createElement(S,null,t.bases.map((function(e,a){return r.a.createElement(u.a,{key:a},r.a.createElement(o.a,{w:"45%"},r.a.createElement(D.a,{value:e,onChange:function(e){e.preventDefault(),c({type:"change_base",index:a,value:e.target.value})}})),r.a.createElement(u.a,{ml:"auto",w:"50%"},r.a.createElement(d.a,{flexWrap:"wrap",wordBreak:"break-word",my:"auto",ml:"auto",fontSize:"18px",fontWeight:"bold"},t.damages[a].toLocaleString("en",{useGrouping:!0}))))}))))},G=function(){var e=Object(n.useContext)(N),t=e.spells,a=e.dispatch,c=t.map((function(e,t){return r.a.createElement(u.a,{key:e.id,mb:"auto",pb:"20px",w:"206px",mr:"20px"},r.a.createElement(T,{spell:e,index:t}))}));return r.a.createElement(o.a,{maxW:"900px",pl:"20px",mx:"auto"},r.a.createElement(f,{py:"10px",mr:"20px",my:"20px"},r.a.createElement(i.a,{color:"gray.900",textAlign:"center",size:"xl"},"Wiz Calculator 2")),r.a.createElement(o.a,null,r.a.createElement(o.a,{float:"left",minW:"181px",w:"181px",mr:"20px"},r.a.createElement(o.a,{mb:"20px"},r.a.createElement(M,null))),r.a.createElement(u.a,{wrap:"wrap"},c,r.a.createElement(u.a,{pb:"20px",w:"216px",mr:"10px"},t.length<12?r.a.createElement(s.a,{variantColor:"blue",boxShadow:"md",m:"auto","aria-label":"Add Spellcard",icon:"add",onClick:function(){a({type:"add_spell"})}}):null))))},L=a(18),U=a(70);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(68),q=Object(v.a)({},$.a);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L.a,{theme:q},r.a.createElement(U.a,null),r.a.createElement(_,null,r.a.createElement(W,null,r.a.createElement(G,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.cb99955b.chunk.js.map