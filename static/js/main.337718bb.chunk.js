(this["webpackJsonpwiz-calc-2"]=this["webpackJsonpwiz-calc-2"]||[]).push([[0],{44:function(e,t,a){e.exports=a(56)},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),l=a.n(c),i=a(37),o=a(62),s=a(6),u=a(63),p=a(43),m=a(12),d=a(59),b=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement(d.a,Object.assign({spacing:"5px",boxShadow:"md",border:"solid 3px",borderRadius:"10px",borderColor:"gray.300"},a),t)},f=a(60),h=a(61),g=a(32),v=a(13),E=a(4),x=a(65),O=function(e){var t=parseFloat(e);return t||0},j=function(e,t,a){var n=e.enchantment?e.enchantment:0,r=e.increment?e.increment.base*e.increment.pips:0;return e.damages[a]=y(t,e.bases[a]+n+r),e},y=function(e,t){for(var a=e.percentModifier,n=e.flatDamage,r=e.buffs,c=Math.floor((1+Number(a)/100)*Number(t)+Number(n)),l=0;l<r.length;l++)c*=1+r[l]/100,c=Math.floor(c);return c},w=function(e,t){switch(t.type){case"change_percent":var a=Object(E.a)({},e);return a.percentModifier=O(t.value),a;case"change_flat":var n=Object(E.a)({},e);return n.flatDamage=O(t.value),n;case"change_buffs":var r=Object(E.a)({},e);return r.buffs=t.value.split("\n").map((function(e){var t=parseInt(e.split(" ")[0]);return t||0})),r.buffsRaw=t.value,r;case"load":return t.character;default:throw new Error("Error")}},_={percentModifier:0,flatDamage:0,pierce:0,buffs:[],buffsRaw:"",shields:[],sheldsRaw:""},C=Object(n.createContext)({loading:!1,character:_,dispatch:function(){return null}}),S=function(e){var t=e.children,a=Object(n.useReducer)(w,_),c=Object(v.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(!0),s=Object(v.a)(o,2),u=s[0],p=s[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("character");if(e){var t=JSON.parse(e);i({type:"load",character:t})}p(!1)}),[]),Object(n.useEffect)((function(){localStorage.setItem("character",JSON.stringify(l))}),[l]),r.a.createElement(C.Provider,{value:{loading:u,character:l,dispatch:i}},t)},k=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement(d.a,Object.assign({spacing:"10px",px:"10px",pb:"10px",pt:"5px"},a),t)},D=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement(d.a,Object.assign({p:"10px",borderBottom:"solid 3px",borderColor:"gray.300",spacing:"10px"},a),t)},z=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement(d.a,Object.assign({spacing:"5px",px:"10px",pb:"10px",mb:"5px",borderBottom:"solid 3px",borderColor:"gray.300"},a),t)},A=a(42),B=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement(s.a,null,r.a.createElement(f.a,null,t),r.a.createElement(A.a,Object.assign({type:"number",onFocus:function(e){e.target.select()}},a)))},I=function(){var e=Object(n.useContext)(C),t=e.loading,a=e.character,c=e.dispatch;return r.a.createElement(b,null,r.a.createElement(D,null,r.a.createElement(f.a,{textAlign:"center",fontSize:"20px"},"Character Stats")),r.a.createElement(z,null,r.a.createElement(B,{isDisabled:t,value:a.percentModifier,onChange:function(e){e.preventDefault(),c({type:"change_percent",value:e.target.value})}},"Percent Modifier"),r.a.createElement(B,{isDisabled:t,value:a.flatDamage,onChange:function(e){e.preventDefault(),c({type:"change_flat",value:e.target.value})}},"Flat Damage")),r.a.createElement(z,null,r.a.createElement(f.a,{fontSize:"20px",textAlign:"center"},"+ / - Charms")),r.a.createElement(k,null,r.a.createElement(h.a,{isDisabled:t,height:"212px",resize:"vertical",placeholder:"[percent] [name]",value:a.buffsRaw,onChange:function(e){c({type:"change_buffs",value:e.target.value})}}),r.a.createElement(g.a,{onClick:function(){return c({type:"change_buffs",value:""})},isDisabled:t,mx:"auto",w:"40%"},"Clear")))},M=a(30),R=a(17),W=function(e,t){switch(t.type){case"add_spell":return[].concat(Object(R.a)(e),[{id:Object(x.a)(),name:"Untitled",bases:[0],damages:[0]}]);case"delete_spell":for(var a=[],n=0;n<e.length;n++)t.index!==n&&a.push(e[n]);return a;case"update_spell":var r=Object(R.a)(e);return r[t.index]=t.spell,r;case"load":return t.spells;default:throw new Error("Error")}},N=Object(n.createContext)({loading:!1,spells:[],dispatch:function(){return null}}),J=function(e){var t=e.children,a=Object(n.useReducer)(W,[]),c=Object(v.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(!0),s=Object(v.a)(o,2),u=s[0],p=s[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("spells");if(e){var t=JSON.parse(e);i({type:"load",spells:t})}p(!1)}),[]),Object(n.useEffect)((function(){localStorage.setItem("spells",JSON.stringify(l))}),[l]),r.a.createElement(N.Provider,{value:{loading:u,spells:l,dispatch:i}},t)},F=function(e,t){switch(t.type){case"change_name":return Object(E.a)(Object(E.a)({},e),{},{name:t.name});case"add_base":var a=Object(R.a)(e.bases),n=Object(R.a)(e.damages);return a.push(0),n.push(0),Object(E.a)(Object(E.a)({},e),{},{bases:a,damages:n});case"change_base":var r=Object(R.a)(e.bases);return r[t.index]=O(t.value),Object(E.a)(Object(E.a)({},e),{},{bases:r});case"delete_base":for(var c=[],l=[],i=0;i<e.bases.length;i++)t.index!==i&&(c.push(e.bases[i]),l.push(e.damages[i]));return Object(E.a)(Object(E.a)({},e),{},{bases:c,damages:l});case"calculate":var o=Object(E.a)({},e);return function(e,t){for(var a=0;a<e.bases.length;a++)j(e,t,a)}(o,t.character),o;case"toggle_enchantment":return console.log(e.enchantment),Object(E.a)(Object(E.a)({},e),{},{enchantment:void 0===e.enchantment?0:void 0});case"change_enchantment":return Object(E.a)(Object(E.a)({},e),{},{enchantment:O(t.value)});case"toggle_increment":return Object(E.a)(Object(E.a)({},e),{},{increment:void 0===e.increment?{base:0,pips:1}:void 0});case"change_increment":if(void 0===e.increment)return e;var s=Object(E.a)({},e.increment);return void 0!==t.base&&(s.base=O(t.base)),void 0!==t.pips&&(s.pips=O(t.pips)),Object(E.a)(Object(E.a)({},e),{},{increment:s});case"delete_spell":return Object(E.a)(Object(E.a)({},e),{},{_delete:!0});default:throw new Error("Error")}},P=function(e){var t=Object.assign({},e);return r.a.createElement(o.a,Object.assign({},t,{fontSize:"24px",icon:M.a}))},T=function(e){var t=e.spell,a=e.index,c=function(e,t){var a=Object(n.useContext)(N).dispatch,c=Object(n.useContext)(C).character,l=r.a.useReducer(F,e),i=Object(v.a)(l,2),o=i[0],s=i[1];return Object(n.useEffect)((function(){!0===o._delete?a({type:"delete_spell",index:t}):a({type:"update_spell",index:t,spell:o})}),[o,a,t]),Object(n.useEffect)((function(){s({type:"calculate",character:c})}),[c,o.bases,o.enchantment,o.increment]),s}(t,a),l=Object(n.useState)(!1),u=Object(v.a)(l,2),p=u[0],m=u[1];return r.a.createElement(b,null,r.a.createElement(D,{p:"5px"},r.a.createElement(i.a,null,r.a.createElement(i.a,null,r.a.createElement(o.a,{"aria-label":"edit",variant:"ghost",isActive:p,fontSize:"24px",title:"Click for edit mode or Shift+Click to delete spell",onClick:function(e){e.shiftKey?c({type:"delete_spell"}):m(!p)},mr:"5px",icon:M.b})),r.a.createElement(i.a,null,r.a.createElement(A.a,{textAlign:"center",fontSize:"20px",mr:"5px",border:"none",spellCheck:"false",value:t.name,onFocus:function(e){e.target.select()},onChange:function(e){e.preventDefault(),c({type:"change_name",name:e.target.value})}})),r.a.createElement(i.a,null,p&&r.a.createElement(P,{variantColor:"red","aria-label":"close",title:"Delete spell",onClick:function(){return c({type:"delete_spell"})}})))),p&&r.a.createElement(z,{mt:"5px",spacing:"8px",isInline:!0},r.a.createElement(g.a,{onClick:function(){return c({type:"add_base"})},isActive:void 0!==t.enchantment,title:"Add base to spell"},"B"),r.a.createElement(g.a,{onClick:function(){return c({type:"toggle_enchantment"})},isActive:void 0!==t.enchantment,title:"Toggle enchantment"},"E"),r.a.createElement(g.a,{onClick:function(){return c({type:"toggle_increment"})},isActive:void 0!==t.increment,title:"Toggle increment"},"I")),void 0!==t.enchantment?r.a.createElement(z,null,r.a.createElement(B,{onChange:function(e){c({type:"change_enchantment",value:e.target.value})},value:t.enchantment},"Enchantment")):null,void 0!==t.increment?r.a.createElement(z,null,r.a.createElement(i.a,null,r.a.createElement(s.a,{pr:"10px"},r.a.createElement(B,{onChange:function(e){c({type:"change_increment",pips:e.target.value})},value:t.increment.pips},"Pips")),r.a.createElement(B,{onChange:function(e){c({type:"change_increment",base:e.target.value})},value:t.increment.base},"Base"))):null,r.a.createElement(k,null,t.bases.map((function(e,a){return r.a.createElement(i.a,{key:a},p&&r.a.createElement(P,{variant:"ghost",mr:"10px","aria-label":"close",title:"Delete base",onClick:function(){return c({type:"delete_base",index:a})}}),r.a.createElement(i.a,{w:"50%"},r.a.createElement(B,{value:e,title:"Base damage",onChange:function(e){e.preventDefault(),c({type:"change_base",index:a,value:e.target.value})}})),r.a.createElement(i.a,{ml:"auto"},r.a.createElement(f.a,{flexWrap:"wrap",wordBreak:"break-word",my:"auto",ml:"auto",fontSize:"18px",fontWeight:"bold"},t.damages[a].toLocaleString("en",{useGrouping:!0}))))}))))},G=function(){var e=Object(n.useContext)(N),t=e.spells,a=e.dispatch,c=e.loading,l=t.map((function(e,t){return r.a.createElement(i.a,{key:e.id,mb:"auto",pb:"20px",w:"206px",mr:"20px"},r.a.createElement(T,{spell:e,index:t}))})),m=r.a.createElement(r.a.Fragment,null,l,r.a.createElement(i.a,{minH:"100px",pb:"20px",w:"216px",mr:"10px"},t.length<12&&r.a.createElement(o.a,{variantColor:"blue",boxShadow:"md",m:"auto","aria-label":"Add Spellcard",icon:"add",onClick:function(){a({type:"add_spell"})}})));return r.a.createElement(s.a,{minW:"430px",maxW:"900px",pl:"20px",mx:"auto"},r.a.createElement(b,{py:"10px",mr:"20px",my:"20px"},r.a.createElement(u.a,{color:"gray.900",textAlign:"center",size:"xl"},"Wiz Calculator 2")),r.a.createElement(s.a,null,r.a.createElement(s.a,{float:"left",minW:"181px",w:"181px",mr:"20px"},r.a.createElement(s.a,{mb:"20px"},r.a.createElement(I,null))),r.a.createElement(i.a,{wrap:"wrap"},c?r.a.createElement(p.a,{mx:"auto"}):m)))},H=a(21),K=a(66);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(64),U=Object(E.a)({},L.a);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H.a,{theme:U},r.a.createElement(K.a,null),r.a.createElement(S,null,r.a.createElement(J,null,r.a.createElement(G,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.337718bb.chunk.js.map